<script src="https://apis.google.com/js/api.js"></script>
<script>
	/**
	 * Sample JavaScript code for search.cse.list
	 * See instructions for running APIs Explorer code samples locally:
	 * https://developers.google.com/explorer-help/code-samples#javascript
	 */

	function loadClient() {
		gapi.client.setApiKey('AIzaSyBJM2Sx8opQ58Cjs0MKAndIFq4wE90oEf8')
		return gapi.client.load('https://content.googleapis.com/discovery/v1/apis/customsearch/v1/rest').then(
			function () {
				console.log('GAPI client loaded for API')
			},
			function (err) {
				console.error('Error loading GAPI client for API', err)
			}
		)
	}
	// Make sure the client is loaded before calling this method.
	function execute() {
		return gapi.client.search.cse.list({ q: 'modern', cx: '75899d8a2b153407f' }).then(
			function (response) {
				// Handle the results here (response.result has the parsed body).
				console.log('Response', response)
			},
			function (err) {
				console.error('Execute error', err)
			}
		)
	}
	gapi.load('client')
</script>
<button onclick="loadClient()">load</button>
<button onclick="execute()">execute</button>
